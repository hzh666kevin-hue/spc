<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SPC â€” å®‰å…¨ç”Ÿäº§åŠ›ä¸­æ¢</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: {
        fontFamily: { sans: ['Inter','-apple-system','PingFang SC','Microsoft YaHei','system-ui','sans-serif'], mono: ['JetBrains Mono','Fira Code','monospace'] },
        colors: {
          brand: { 50:'#EEF2FF',100:'#E0E7FF',200:'#C7D2FE',300:'#A5B4FC',400:'#818CF8',500:'#6366F1',600:'#4F46E5',700:'#4338CA',800:'#3730A3',900:'#312E81' },
          surface: { 0:'#FFFFFF',1:'#FAFAF9',2:'#F5F5F4',3:'#E7E5E4' },
          ink: { 0:'#1C1917',1:'#57534E',2:'#A8A29E' },
        },
        boxShadow: { brand:'0 4px 14px rgba(79,70,229,0.18)', glow:'0 0 24px rgba(79,70,229,0.25)', card:'0 1px 3px rgba(0,0,0,0.04),0 1px 2px rgba(0,0,0,0.06)', modal:'0 25px 50px -12px rgba(0,0,0,0.15)' },
        animation: { 'fade-in':'fadeIn .25s ease-out', 'slide-up':'slideUp .35s cubic-bezier(0.16,1,0.3,1)', 'scale-in':'scaleIn .25s cubic-bezier(0.34,1.56,0.64,1)', 'count':'countUp .6s cubic-bezier(0.34,1.56,0.64,1)', 'glow':'glow 3s ease-in-out infinite', 'float':'float 3s ease-in-out infinite' },
        keyframes: {
          fadeIn:   { '0%':{opacity:'0'},'100%':{opacity:'1'} },
          slideUp:  { '0%':{opacity:'0',transform:'translateY(16px)'},'100%':{opacity:'1',transform:'translateY(0)'} },
          scaleIn:  { '0%':{opacity:'0',transform:'scale(0.96)'},'100%':{opacity:'1',transform:'scale(1)'} },
          countUp:  { '0%':{opacity:'0',transform:'translateY(8px)'},'100%':{opacity:'1',transform:'translateY(0)'} },
          glow:     { '0%,100%':{boxShadow:'0 0 12px rgba(79,70,229,0.15)'},'50%':{boxShadow:'0 0 24px rgba(79,70,229,0.3)'} },
          float:    { '0%,100%':{transform:'translateY(0)'},'50%':{transform:'translateY(-6px)'} },
        },
      }},
    };
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0EA5E9" />
  <link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%230EA5E9'/%3E%3Cstop offset='50%25' stop-color='%233B82F6'/%3E%3Cstop offset='100%25' stop-color='%231E40AF'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='128' height='128' rx='24' fill='%230F172A'/%3E%3Ctext x='64' y='85' font-family='Arial Black, sans-serif' font-size='64' font-weight='900' text-anchor='middle' fill='url(%23grad)'%3ESPC%3C/text%3E%3C/svg%3E" />
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%230EA5E9'/%3E%3Cstop offset='50%25' stop-color='%233B82F6'/%3E%3Cstop offset='100%25' stop-color='%231E40AF'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='128' height='128' rx='24' fill='%230F172A'/%3E%3Ctext x='64' y='85' font-family='Arial Black, sans-serif' font-size='64' font-weight='900' text-anchor='middle' fill='url(%23grad)'%3ESPC%3C/text%3E%3C/svg%3E" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="SPC" />
  <link rel="stylesheet" href="css/design-system.css" />
  <style>
    .module-frame { border:none; width:100%; height:100%; display:none; background:var(--bg-primary); }
    .module-frame.active { display:block; }
    .stat-value { font-variant-numeric: tabular-nums; }
    .gradient-text { background:linear-gradient(135deg,#6366F1,#8B5CF6,#06B6D4); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
    .hero-gradient { background:linear-gradient(135deg,rgba(99,102,241,0.05) 0%,rgba(139,92,246,0.03) 50%,rgba(6,182,212,0.05) 100%); }
    .dark .hero-gradient { background:linear-gradient(135deg,rgba(99,102,241,0.08) 0%,rgba(139,92,246,0.04) 50%,rgba(6,182,212,0.06) 100%); }
    .glass-panel { background:rgba(255,255,255,0.6); backdrop-filter:blur(20px) saturate(1.4); -webkit-backdrop-filter:blur(20px) saturate(1.4); border:1px solid rgba(255,255,255,0.3); }
    .dark .glass-panel { background:rgba(30,29,39,0.6); border-color:rgba(255,255,255,0.06); }
    .sidebar-item { transition: all 150ms cubic-bezier(0.16,1,0.3,1); }
    .sidebar-item:hover { background:var(--bg-tertiary,#F5F5F4); }
    .sidebar-item.active { background:rgba(79,70,229,0.08); color:#4F46E5; }
    .dark .sidebar-item.active { background:rgba(99,102,241,0.12); color:#A5B4FC; }
    .dot-grid { background-image:radial-gradient(circle,rgba(99,102,241,0.08) 1px,transparent 1px); background-size:24px 24px; }
    .dark .dot-grid { background-image:radial-gradient(circle,rgba(99,102,241,0.12) 1px,transparent 1px); }
    #lockscreen { position:fixed; inset:0; z-index:99999; display:none; align-items:center; justify-content:center; }
    #lockscreen.visible { display:flex; }
    .overlay { position:fixed; inset:0; z-index:50000; display:none; }
    .overlay.visible { display:flex; }
  </style>
</head>
<body class="font-sans antialiased h-screen flex">

  <!-- ========== ç™»å½•/è´¦æˆ·ç®¡ç†æ¨¡æ€æ¡† ========== -->
  <div id="auth-modal" class="fixed inset-0 z-[9999] bg-slate-900/90 backdrop-blur-sm flex items-center justify-center hidden">
    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden animate-scale-in">
      <!-- å¤´éƒ¨ -->
      <div class="bg-gradient-to-r from-cyan-500 to-blue-600 p-6 text-center">
        <div class="w-16 h-16 mx-auto mb-3 bg-white/20 rounded-2xl flex items-center justify-center">
          <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"/>
          </svg>
        </div>
        <h2 class="text-2xl font-bold text-white" id="auth-title">SPC å®‰å…¨ç”Ÿäº§åŠ›ä¸­æ¢</h2>
        <p class="text-white/80 text-sm mt-1" id="auth-subtitle">ç™»å½•æ‚¨çš„è´¦æˆ·</p>
      </div>
      
      <!-- ç™»å½•è¡¨å• -->
      <div class="p-6">
        <!-- ç”¨æˆ·é€‰æ‹©åˆ—è¡¨ï¼ˆå·²æœ‰è´¦æˆ·æ—¶æ˜¾ç¤ºï¼‰ -->
        <div id="user-list-container" class="mb-4 hidden">
          <label class="block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2">é€‰æ‹©è´¦æˆ·</label>
          <div id="user-list" class="space-y-2 max-h-40 overflow-y-auto"></div>
          <button onclick="AuthUI.showLoginForm()" class="mt-3 text-sm text-cyan-600 hover:text-cyan-700">+ æ·»åŠ æ–°è´¦æˆ·</button>
        </div>
        
        <!-- ç™»å½•è¡¨å• -->
        <div id="login-form">
          <div class="mb-4">
            <label class="block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1">ç”¨æˆ·å</label>
            <input type="text" id="login-username" class="w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition" placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1">å¯†ç  <span class="text-slate-400 text-xs">(äº‘ç«¯æ¨¡å¼å¿…å¡«)</span></label>
            <input type="password" id="login-password" class="w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition" placeholder="è¯·è¾“å…¥å¯†ç ">
          </div>
          <div class="mb-4" id="cloud-url-container" style="display:none;">
            <label class="block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1">äº‘ç«¯æœåŠ¡å™¨åœ°å€</label>
            <input type="url" id="login-cloud-url" class="w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition" placeholder="https://your-server.com" value="http://144.48.182.92:3000">
          </div>
          <div class="mb-4" id="sync-password-container" style="display:none;">
            <label class="block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1">ğŸ” åŒæ­¥å¯†ç  <span class="text-slate-400 text-xs">(ç”¨äºåŠ å¯†äº‘ç«¯æ•°æ®)</span></label>
            <input type="password" id="login-sync-password" class="w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition" placeholder="è®¾ç½®åŒæ­¥å¯†ç ï¼Œæ•°æ®åŠ å¯†ä¸Šä¼ ">
          </div>
          <button onclick="AuthUI.login()" class="w-full py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium rounded-xl hover:shadow-lg hover:shadow-cyan-500/25 transition-all">ç™»å½•</button>
        </div>
        
        <!-- æ³¨å†Œè¡¨å• -->
        <div id="register-form" class="hidden">
          <div class="mb-4">
            <label class="block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1">åˆ›å»ºç”¨æˆ·å</label>
            <input type="text" id="reg-username" class="w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition" placeholder="è¾“å…¥ç”¨æˆ·å">
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1">è®¾ç½®å¯†ç  <span class="text-slate-400 text-xs">(å¯é€‰)</span></label>
            <input type="password" id="reg-password" class="w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition" placeholder="è®¾ç½®å¯†ç ï¼ˆäº‘ç«¯æ¨¡å¼å¿…å¡«ï¼‰">
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2">æ•°æ®å­˜å‚¨æ¨¡å¼</label>
            <div class="flex gap-3">
              <label class="flex-1 cursor-pointer">
                <input type="radio" name="storage-mode" value="local" class="peer sr-only" onchange="AuthUI.toggleCloudUrl(false)">
                <div class="p-3 rounded-xl border-2 border-slate-200 dark:border-slate-600 peer-checked:border-cyan-500 peer-checked:bg-cyan-50 dark:peer-checked:bg-cyan-900/20 transition">
                  <div class="text-center">
                    <svg class="w-6 h-6 mx-auto mb-1 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/></svg>
                    <div class="text-sm font-medium">æœ¬åœ°å­˜å‚¨</div>
                    <div class="text-xs text-slate-500">æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨</div>
                  </div>
                </div>
              </label>
              <label class="flex-1 cursor-pointer">
                <input type="radio" name="storage-mode" value="cloud" checked class="peer sr-only" onchange="AuthUI.toggleCloudUrl(true)">
                <div class="p-3 rounded-xl border-2 border-slate-200 dark:border-slate-600 peer-checked:border-cyan-500 peer-checked:bg-cyan-50 dark:peer-checked:bg-cyan-900/20 transition">
                  <div class="text-center">
                    <svg class="w-6 h-6 mx-auto mb-1 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"/></svg>
                    <div class="text-sm font-medium">äº‘ç«¯åŒæ­¥</div>
                    <div class="text-xs text-slate-500">åŒæ­¥åˆ°æ‚¨çš„æœåŠ¡å™¨</div>
                  </div>
                </div>
              </label>
            </div>
          </div>
          <div class="mb-4" id="reg-cloud-url-container" style="display:none;">
            <label class="block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1">æ‚¨çš„æœåŠ¡å™¨åœ°å€</label>
            <input type="url" id="reg-cloud-url" class="w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition" placeholder="https://your-server.com" value="http://144.48.182.92:3000">
            <p class="text-xs text-slate-500 mt-1">æ‚¨éœ€è¦éƒ¨ç½²è‡ªå·±çš„ SPC æœåŠ¡å™¨æ¥åŒæ­¥æ•°æ®</p>
          </div>
          <div class="mb-4" id="reg-sync-password-container" style="display:none;">
            <label class="block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1">ğŸ” åŒæ­¥å¯†ç  <span class="text-slate-400 text-xs">(ç”¨äºåŠ å¯†äº‘ç«¯æ•°æ®)</span></label>
            <input type="password" id="reg-sync-password" class="w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition" placeholder="è®¾ç½®åŒæ­¥å¯†ç ï¼Œæ•°æ®åŠ å¯†ä¸Šä¼ ">
            <p class="text-xs text-cyan-600 mt-1">âš ï¸ è¯·åŠ¡å¿…è®°ä½æ­¤å¯†ç ï¼å¿˜è®°åæ— æ³•æ¢å¤æ•°æ®</p>
          </div>
          <button onclick="AuthUI.register()" class="w-full py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium rounded-xl hover:shadow-lg hover:shadow-cyan-500/25 transition-all">åˆ›å»ºè´¦æˆ·</button>
        </div>
        
        <!-- åˆ‡æ¢ç™»å½•/æ³¨å†Œ -->
        <div class="mt-4 text-center">
          <span class="text-sm text-slate-500" id="auth-toggle-text">è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ</span>
          <button onclick="AuthUI.toggleAuthMode()" class="text-sm text-cyan-600 hover:text-cyan-700 font-medium ml-1" id="auth-toggle-btn">ç«‹å³æ³¨å†Œ</button>
        </div>
        
        <!-- é”™è¯¯æç¤º -->
        <div id="auth-error" class="mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm hidden"></div>
      </div>
    </div>
  </div>

  <!-- é¡¶éƒ¨ç”¨æˆ·æ  -->
  <div id="user-bar" class="fixed top-4 right-4 z-50 hidden">
    <div class="flex items-center gap-3 bg-white dark:bg-slate-800 rounded-full shadow-lg px-4 py-2 border border-slate-200 dark:border-slate-700">
      <div class="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold text-sm" id="user-avatar">U</div>
      <span class="text-sm font-medium text-slate-700 dark:text-slate-200" id="user-name">ç”¨æˆ·</span>
      <button onclick="AuthUI.showSettings()" class="p-1.5 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700" title="è´¦æˆ·è®¾ç½®">
        <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
      </button>
      <button onclick="AuthUI.logout()" class="p-1.5 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700" title="é€€å‡ºç™»å½•">
        <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
      </button>
    </div>
  </div>

  <!-- ========== ä¾§è¾¹æ  (60px, Linear é£æ ¼) ========== -->
  <aside id="sidebar" class="w-[60px] min-w-[60px] h-screen border-r flex flex-col items-center py-3 z-40 transition-colors"
         style="background:var(--bg-secondary); border-color:var(--border-default);">
    <!-- Logo -->
    <button onclick="SPC.navigate('home')" class="mb-1 group">
      <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-brand-500 to-brand-700 flex items-center justify-center shadow-brand group-hover:shadow-glow group-hover:scale-105 transition-all">
        <svg class="w-[18px] h-[18px] text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"/></svg>
      </div>
    </button>

    <div class="w-7 h-px my-2 rounded-full" style="background:var(--border-default)"></div>

    <!-- ä¸»å¯¼èˆª -->
    <nav class="flex-1 flex flex-col items-center gap-1 w-full px-2" id="main-nav">
      <button class="sidebar-item relative w-full h-10 rounded-xl flex items-center justify-center group" data-module="home" onclick="SPC.navigate('home')">
        <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75"/></svg>
        <span class="nav-tooltip">ä¸»é¡µ</span>
      </button>
      <button class="sidebar-item relative w-full h-10 rounded-xl flex items-center justify-center group" onclick="window.location.href='safe/index.html'" style="color:var(--text-tertiary)">
        <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"/></svg>
        <span class="nav-tooltip">ä¿é™©ç®±</span>
      </button>
      <button class="sidebar-item relative w-full h-10 rounded-xl flex items-center justify-center group" onclick="window.location.href='plan/index.html'" style="color:var(--text-tertiary)">
        <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"/></svg>
        <span class="nav-tooltip">æ—¶é—´è§„åˆ’</span>
      </button>
      <button class="sidebar-item relative w-full h-10 rounded-xl flex items-center justify-center group" onclick="window.location.href='note/index.html'" style="color:var(--text-tertiary)">
        <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"/></svg>
        <span class="nav-tooltip">ç¬”è®°</span>
      </button>
    </nav>

    <!-- åº•éƒ¨å·¥å…· -->
    <div class="flex flex-col items-center gap-1 w-full px-2">
      <div class="w-7 h-px my-1 rounded-full" style="background:var(--border-default)"></div>
      <!-- æš—è‰²æ¨¡å¼åˆ‡æ¢ -->
      <button onclick="SPC.toggleTheme()" class="sidebar-item relative w-full h-10 rounded-xl flex items-center justify-center group" style="color:var(--text-tertiary)" title="åˆ‡æ¢ä¸»é¢˜">
        <svg id="theme-icon-light" class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"/></svg>
        <svg id="theme-icon-dark" class="w-[18px] h-[18px] hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"/></svg>
        <span class="nav-tooltip">åˆ‡æ¢ä¸»é¢˜</span>
      </button>
      <!-- æœç´¢ -->
      <button onclick="SPC.openSearch()" class="sidebar-item relative w-full h-10 rounded-xl flex items-center justify-center group" style="color:var(--text-tertiary)">
        <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"/></svg>
        <span class="nav-tooltip">æœç´¢ âŒ˜K</span>
      </button>
      <!-- è®¾ç½® -->
      <button onclick="SPC.openSettings()" class="sidebar-item relative w-full h-10 rounded-xl flex items-center justify-center group" style="color:var(--text-tertiary)">
        <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
        <span class="nav-tooltip">è®¾ç½®</span>
      </button>
      <!-- é”å®š -->
      <button onclick="SPC.lock()" class="sidebar-item relative w-full h-10 rounded-xl flex items-center justify-center group" style="color:var(--text-tertiary)">
        <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"/></svg>
        <span class="nav-tooltip">é”å®š âŒ˜L</span>
      </button>
    </div>
  </aside>

  <!-- ========== ä¸»å†…å®¹ ========== -->
  <div class="flex-1 flex flex-col h-screen overflow-hidden transition-colors" style="background:var(--bg-primary)">
    <!-- é¡¶æ  -->
    <header class="h-[52px] min-h-[52px] flex items-center px-5 z-30 border-b glass-panel transition-colors"
            style="border-color:var(--border-default)">
      <div class="flex items-center gap-2 min-w-0">
        <span class="w-1.5 h-1.5 rounded-full bg-brand-500"></span>
        <h1 id="page-title" class="text-sm font-semibold truncate" style="color:var(--text-primary)">ä¸»é¡µ</h1>
      </div>
      <div class="flex-1 flex justify-center px-8">
        <button onclick="SPC.openSearch()" class="flex items-center gap-2 px-4 py-[7px] rounded-xl text-sm max-w-md w-full group transition-all"
                style="background:var(--input-bg); border:1px solid var(--input-border); color:var(--text-tertiary)">
          <svg class="w-4 h-4 group-hover:text-brand-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"/></svg>
          <span class="truncate">æœç´¢ä»»åŠ¡ã€ç¬”è®°ã€å¯†ç ...</span>
          <span class="ml-auto flex items-center gap-1"><span class="kbd">âŒ˜</span><span class="kbd">K</span></span>
        </button>
      </div>
      <div class="flex items-center gap-3">
        <div class="flex items-center gap-1.5 text-xs" style="color:var(--success)"><span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span><span id="status-text">å°±ç»ª</span></div>
        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-brand-400 to-brand-600 flex items-center justify-center text-white text-xs font-semibold cursor-pointer hover:shadow-brand transition-shadow" onclick="SPC.openSettings()">ç®¡</div>
      </div>
    </header>

    <!-- å†…å®¹åŒº -->
    <main class="flex-1 overflow-hidden relative" id="content-area">
      <!-- ä¸»é¡µé¢æ¿ -->
      <div id="home-panel" class="h-full overflow-auto">
        <div class="max-w-5xl mx-auto px-8 py-10">
          <!-- ç¥ç¦è¯­æ¨ªå¹… -->
          <div class="bg-gradient-to-r from-cyan-500 via-blue-500 to-indigo-500 rounded-2xl p-4 mb-6 text-center animate-fade-in shadow-lg">
            <p class="text-white text-lg font-medium">
              ğŸ‰ ç¥å¤§å®¶2026æ–°å¹´å¿«ä¹ï¼ 
              <span class="opacity-80">By-XiaoH</span>
            </p>
          </div>

          <!-- Hero å¤´éƒ¨ (æ¸å˜èƒŒæ™¯) -->
          <div class="hero-gradient rounded-3xl p-8 mb-8 animate-fade-in relative overflow-hidden">
            <div class="dot-grid absolute inset-0 opacity-50"></div>
            <div class="relative z-10 flex items-center gap-5">
              <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-brand-500 to-brand-700 flex items-center justify-center shadow-brand animate-glow shrink-0">
                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"/></svg>
              </div>
              <div>
                <h1 class="text-2xl font-bold" id="greeting-text" style="color:var(--text-primary)">ä½ å¥½ï¼Œç®¡ç†å‘˜</h1>
                <p class="text-sm mt-0.5" style="color:var(--text-secondary)">é€‰æ‹©ä¸€ä¸ªæ¨¡å—å¼€å§‹å·¥ä½œ</p>
              </div>
              <div class="ml-auto text-right hidden sm:block">
                <div class="text-xs font-mono" style="color:var(--text-tertiary)" id="current-date"></div>
                <div class="text-xs mt-0.5" style="color:var(--text-tertiary)">è¿è¡Œ <span id="stat-uptime" class="font-mono">--</span></div>
              </div>
            </div>
          </div>

          <!-- ç»Ÿè®¡å¡ç‰‡ (4 åˆ—, å“ç‰Œè‰²é˜´å½±) -->
          <div class="grid grid-cols-4 gap-4 mb-8">
            <div class="card card-glow p-4 animate-slide-up" style="animation-delay:0ms">
              <div class="flex items-center justify-between mb-3">
                <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-cyan-50 to-blue-50 flex items-center justify-center"><svg class="w-4 h-4 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"/></svg></div>
                <span class="badge badge-info text-[10px]">åŠ å¯†</span>
              </div>
              <div class="text-2xl font-bold stat-value animate-count" id="stat-passwords" style="color:var(--text-primary)">ğŸ”’</div>
              <div class="text-xs mt-0.5" style="color:var(--text-secondary)">å¯†ç æ¡ç›®</div>
            </div>
            <div class="card card-glow p-4 animate-slide-up" style="animation-delay:60ms">
              <div class="flex items-center justify-between mb-3">
                <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-violet-50 to-purple-50 flex items-center justify-center"><svg class="w-4 h-4 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                <span class="badge badge-success text-[10px]" id="task-rate">0%</span>
              </div>
              <div class="text-2xl font-bold stat-value animate-count" id="stat-tasks" style="color:var(--text-primary)">0</div>
              <div class="text-xs mt-0.5" style="color:var(--text-secondary)">ä»»åŠ¡æ€»æ•°</div>
            </div>
            <div class="card card-glow p-4 animate-slide-up" style="animation-delay:120ms">
              <div class="flex items-center justify-between mb-3">
                <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-emerald-50 to-green-50 flex items-center justify-center"><svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"/></svg></div>
              </div>
              <div class="text-2xl font-bold stat-value animate-count" id="stat-notes" style="color:var(--text-primary)">0</div>
              <div class="text-xs mt-0.5" style="color:var(--text-secondary)">ç¬”è®°ç¯‡æ•°</div>
            </div>
            <div class="card card-glow p-4 animate-slide-up" style="animation-delay:180ms">
              <div class="flex items-center justify-between mb-3">
                <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-amber-50 to-orange-50 flex items-center justify-center"><svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"/></svg></div>
              </div>
              <div class="text-2xl font-bold stat-value animate-count" id="stat-storage" style="color:var(--text-primary)">--</div>
              <div class="text-xs mt-0.5" style="color:var(--text-secondary)">å­˜å‚¨ä½¿ç”¨</div>
            </div>
          </div>

          <!-- ====== ç¬¬äºŒè¡Œ: ä»»åŠ¡è¿›åº¦ + ä»Šæ—¥ç„¦ç‚¹ + å®‰å…¨æ¦‚è§ˆ (3åˆ—) ====== -->
          <div class="grid grid-cols-3 gap-4 mb-8">
            <!-- ä»»åŠ¡å®Œæˆç‡ç¯å½¢å›¾ -->
            <div class="card p-5 animate-slide-up" style="animation-delay:200ms">
              <div class="flex items-center gap-2 mb-4">
                <svg class="w-4 h-4 text-violet-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"/></svg>
                <span class="text-xs font-semibold" style="color:var(--text-primary)">ä»»åŠ¡è¿›åº¦</span>
              </div>
              <div class="flex items-center gap-5">
                <div class="relative w-[72px] h-[72px] shrink-0">
                  <svg class="w-[72px] h-[72px] -rotate-90" viewBox="0 0 72 72">
                    <circle cx="36" cy="36" r="30" fill="none" stroke-width="5" style="stroke:var(--border-default)"/>
                    <circle id="progress-ring" cx="36" cy="36" r="30" fill="none" stroke="#6366F1" stroke-width="5" stroke-linecap="round" stroke-dasharray="188.5" stroke-dashoffset="188.5" class="transition-all duration-1000"/>
                  </svg>
                  <span class="absolute inset-0 flex items-center justify-center text-sm font-bold" id="progress-pct" style="color:var(--text-primary)">0%</span>
                </div>
                <div class="space-y-1.5 flex-1 min-w-0">
                  <div class="flex items-center justify-between"><span class="text-[11px]" style="color:var(--text-secondary)">å¾…åŠ</span><span class="text-[11px] font-mono font-semibold" id="ring-todo" style="color:var(--text-primary)">0</span></div>
                  <div class="h-1 rounded-full overflow-hidden" style="background:var(--border-default)"><div class="h-full rounded-full bg-slate-400 transition-all" id="bar-todo" style="width:0%"></div></div>
                  <div class="flex items-center justify-between"><span class="text-[11px]" style="color:var(--text-secondary)">è¿›è¡Œä¸­</span><span class="text-[11px] font-mono font-semibold text-amber-500" id="ring-doing">0</span></div>
                  <div class="h-1 rounded-full overflow-hidden" style="background:var(--border-default)"><div class="h-full rounded-full bg-amber-400 transition-all" id="bar-doing" style="width:0%"></div></div>
                  <div class="flex items-center justify-between"><span class="text-[11px]" style="color:var(--text-secondary)">å·²å®Œæˆ</span><span class="text-[11px] font-mono font-semibold text-emerald-500" id="ring-done">0</span></div>
                  <div class="h-1 rounded-full overflow-hidden" style="background:var(--border-default)"><div class="h-full rounded-full bg-emerald-400 transition-all" id="bar-done" style="width:0%"></div></div>
                </div>
              </div>
            </div>

            <!-- ä»Šæ—¥ç„¦ç‚¹ -->
            <div class="card p-5 animate-slide-up" style="animation-delay:260ms">
              <div class="flex items-center gap-2 mb-3">
                <svg class="w-4 h-4 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span class="text-xs font-semibold" style="color:var(--text-primary)">ä»Šæ—¥ç„¦ç‚¹</span>
                <span class="badge badge-warning text-[10px] ml-auto" id="today-count">0 é¡¹</span>
              </div>
              <div class="space-y-1.5 max-h-[140px] overflow-auto" id="today-tasks">
                <div class="text-xs text-center py-6" style="color:var(--text-tertiary)">
                  <svg class="w-8 h-8 mx-auto mb-2 opacity-30" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  ä»Šå¤©æ²¡æœ‰åˆ°æœŸä»»åŠ¡
                </div>
              </div>
            </div>

            <!-- å®‰å…¨æ¦‚è§ˆ -->
            <div class="card p-5 animate-slide-up" style="animation-delay:320ms">
              <div class="flex items-center gap-2 mb-3">
                <svg class="w-4 h-4 text-cyan-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"/></svg>
                <span class="text-xs font-semibold" style="color:var(--text-primary)">å®‰å…¨çŠ¶æ€</span>
              </div>
              <div id="security-panel">
                <div class="flex items-center gap-3 p-3 rounded-xl mb-2" style="background:var(--bg-tertiary)">
                  <div class="w-10 h-10 rounded-full bg-emerald-500/10 flex items-center justify-center">
                    <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"/></svg>
                  </div>
                  <div>
                    <div class="text-sm font-bold" style="color:var(--text-primary)" id="sec-grade">--</div>
                    <div class="text-[10px]" style="color:var(--text-secondary)">å®‰å…¨è¯„åˆ†</div>
                  </div>
                </div>
                <div class="grid grid-cols-2 gap-2 text-[11px]">
                  <div class="flex items-center gap-1.5 px-2 py-1.5 rounded-lg" style="background:var(--bg-tertiary)">
                    <span class="w-1.5 h-1.5 rounded-full bg-emerald-400"></span>
                    <span style="color:var(--text-secondary)">åŠ å¯†ç®—æ³•</span>
                    <span class="ml-auto font-mono font-medium" style="color:var(--text-primary)">AES-256</span>
                  </div>
                  <div class="flex items-center gap-1.5 px-2 py-1.5 rounded-lg" style="background:var(--bg-tertiary)">
                    <span class="w-1.5 h-1.5 rounded-full bg-emerald-400"></span>
                    <span style="color:var(--text-secondary)">å¯†é’¥è¿­ä»£</span>
                    <span class="ml-auto font-mono font-medium" style="color:var(--text-primary)">310K</span>
                  </div>
                  <div class="flex items-center gap-1.5 px-2 py-1.5 rounded-lg" style="background:var(--bg-tertiary)">
                    <span class="w-1.5 h-1.5 rounded-full" id="sec-dot-vault" style="background:var(--text-tertiary)"></span>
                    <span style="color:var(--text-secondary)">ä¿é™©ç®±</span>
                    <span class="ml-auto font-medium" style="color:var(--text-primary)" id="sec-vault-status">æœªåˆ›å»º</span>
                  </div>
                  <div class="flex items-center gap-1.5 px-2 py-1.5 rounded-lg" style="background:var(--bg-tertiary)">
                    <span class="w-1.5 h-1.5 rounded-full bg-emerald-400"></span>
                    <span style="color:var(--text-secondary)">è‡ªåŠ¨é”å®š</span>
                    <span class="ml-auto font-medium" style="color:var(--text-primary)" id="sec-autolock">5åˆ†é’Ÿ</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- ====== å¿«é€Ÿæ“ä½œæ  ====== -->
          <div class="flex items-center gap-2 mb-6 animate-slide-up" style="animation-delay:350ms">
            <button onclick="SPC.navigate('plan')" class="btn btn-secondary btn-sm gap-1.5">
              <svg class="w-3.5 h-3.5 text-violet-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"/></svg>
              æ–°å»ºä»»åŠ¡
            </button>
            <button onclick="SPC.navigate('note')" class="btn btn-secondary btn-sm gap-1.5">
              <svg class="w-3.5 h-3.5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              æ–°å»ºç¬”è®°
            </button>
            <button onclick="SPC.navigate('safe')" class="btn btn-secondary btn-sm gap-1.5">
              <svg class="w-3.5 h-3.5 text-cyan-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"/></svg>
              ç”Ÿæˆå¯†ç 
            </button>
            <button onclick="SyncService.downloadExport()" class="btn btn-secondary btn-sm gap-1.5">
              <svg class="w-3.5 h-3.5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"/></svg>
              å¯¼å‡ºå¤‡ä»½
            </button>
            <div class="ml-auto flex items-center gap-1.5 text-[10px]" style="color:var(--text-tertiary)">
              <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              <span>æœ€è¿‘å¤‡ä»½: <span id="last-backup-time">--</span></span>
            </div>
          </div>

          <!-- ====== ç¬¬ä¸‰è¡Œ: æœ€è¿‘æ´»åŠ¨ + å¿«é€Ÿå¯åŠ¨ ====== -->
          <div class="grid grid-cols-12 gap-4 mb-8">
            <!-- æœ€è¿‘æ´»åŠ¨ (5åˆ—) -->
            <div class="col-span-5 card p-5 animate-slide-up" style="animation-delay:380ms">
              <div class="flex items-center gap-2 mb-3">
                <svg class="w-4 h-4 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span class="text-xs font-semibold" style="color:var(--text-primary)">æœ€è¿‘æ´»åŠ¨</span>
              </div>
              <div class="space-y-2 max-h-[220px] overflow-auto" id="recent-activity">
                <div class="text-xs text-center py-8" style="color:var(--text-tertiary)">æš‚æ— æ´»åŠ¨è®°å½•</div>
              </div>
            </div>

            <!-- å¿«é€Ÿå¯åŠ¨ (7åˆ—) -->
            <div class="col-span-7">
              <div class="flex items-center gap-2 mb-3">
                <svg class="w-4 h-4 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"/></svg>
                <span class="text-xs font-semibold" style="color:var(--text-secondary)">å¿«é€Ÿå¯åŠ¨</span>
              </div>
          <div class="grid grid-cols-3 gap-3">
            <div onclick="SPC.navigate('safe')" class="card card-glow p-6 cursor-pointer group animate-slide-up" style="animation-delay:240ms">
              <div class="w-11 h-11 rounded-xl bg-gradient-to-br from-cyan-500/10 to-blue-500/10 flex items-center justify-center mb-4 group-hover:scale-110 group-hover:shadow-lg transition-all"><svg class="w-5 h-5 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"/></svg></div>
              <h3 class="font-semibold mb-1" style="color:var(--text-primary)">ä¿é™©ç®±</h3>
              <p class="text-xs leading-relaxed mb-3" style="color:var(--text-secondary)">AES-256 åŠ å¯†å­˜å‚¨ Â· å®‰å…¨å®¡è®¡ Â· å¯†ç ç”Ÿæˆ</p>
              <div class="flex items-center gap-1 text-xs text-brand-600 opacity-0 group-hover:opacity-100 transition-opacity">æ‰“å¼€ <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"/></svg></div>
            </div>
            <div onclick="SPC.navigate('plan')" class="card card-glow p-6 cursor-pointer group animate-slide-up" style="animation-delay:300ms">
              <div class="w-11 h-11 rounded-xl bg-gradient-to-br from-violet-500/10 to-purple-500/10 flex items-center justify-center mb-4 group-hover:scale-110 group-hover:shadow-lg transition-all"><svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"/></svg></div>
              <h3 class="font-semibold mb-1" style="color:var(--text-primary)">æ—¶é—´è§„åˆ’</h3>
              <p class="text-xs leading-relaxed mb-3" style="color:var(--text-secondary)">çœ‹æ¿ Â· ç•ªèŒ„é’Ÿ Â· NLP æ™ºèƒ½è§£æ Â· WSJF æ’åº</p>
              <div class="flex items-center gap-1 text-xs text-brand-600 opacity-0 group-hover:opacity-100 transition-opacity">æ‰“å¼€ <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"/></svg></div>
            </div>
            <div onclick="SPC.navigate('note')" class="card card-glow p-6 cursor-pointer group animate-slide-up" style="animation-delay:360ms">
              <div class="w-11 h-11 rounded-xl bg-gradient-to-br from-emerald-500/10 to-green-500/10 flex items-center justify-center mb-4 group-hover:scale-110 group-hover:shadow-lg transition-all"><svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"/></svg></div>
              <h3 class="font-semibold mb-1" style="color:var(--text-primary)">ç¬”è®°</h3>
              <p class="text-xs leading-relaxed mb-3" style="color:var(--text-secondary)">Markdown Â· Wiki é“¾æ¥ Â· ç‰ˆæœ¬å†å² Â· å…¨æ–‡æœç´¢</p>
              <div class="flex items-center gap-1 text-xs text-brand-600 opacity-0 group-hover:opacity-100 transition-opacity">æ‰“å¼€ <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"/></svg></div>
            </div>
          </div>
            </div>
          </div>

          <!-- NLP æ™ºèƒ½è¾“å…¥ (æ¸å˜è¾¹æ¡†) -->
          <div class="card p-5 mb-8 animate-slide-up" style="animation-delay:420ms">
            <div class="flex items-center gap-2 mb-3">
              <div class="w-5 h-5 rounded-md bg-gradient-to-br from-brand-500 to-violet-500 flex items-center justify-center"><svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z"/></svg></div>
              <span class="text-xs font-semibold" style="color:var(--text-primary)">æ™ºèƒ½å¿«é€Ÿæ·»åŠ </span>
              <span class="badge text-[10px]">NLP</span>
            </div>
            <div class="flex gap-2">
              <input id="nlp-input" type="text" placeholder="è¯•è¯•ï¼šã€Œæ˜å¤©ä¸‹åˆ3ç‚¹å¼€ä¼š #å·¥ä½œ !é«˜ã€"
                     class="input input-lg flex-1" oninput="SPC.nlpPreview()" onkeydown="if(event.key==='Enter')SPC.nlpQuickAdd()" />
              <button onclick="SPC.nlpQuickAdd()" class="btn btn-primary px-5">æ·»åŠ </button>
            </div>
            <div id="nlp-preview" class="mt-2 text-xs hidden animate-fade-in" style="color:var(--text-secondary)"></div>
          </div>

          <!-- å†…æ ¸ä¿¡æ¯ -->
          <div class="flex items-center gap-6 text-[10px] px-2 animate-fade-in" style="color:var(--text-tertiary); animation-delay:500ms">
            <span>SPC å†…æ ¸ v2.0</span>
            <span>IndexedDB + AES-256-GCM</span>
            <span>PBKDF2 Ã—310,000</span>
            <span class="ml-auto" id="boot-time"></span>
          </div>
        </div>
      </div>

      <!-- å­æ¨¡å— iframe -->
      <iframe id="frame-safe" class="module-frame" src="" loading="lazy"></iframe>
      <iframe id="frame-plan" class="module-frame" src="" loading="lazy"></iframe>
      <iframe id="frame-note" class="module-frame" src="" loading="lazy"></iframe>
    </main>
  </div>

  <!-- ========== é”å± ========== -->
  <div id="lockscreen" style="background:var(--bg-overlay); backdrop-filter:blur(24px);">
    <div class="modal p-10 w-[400px] max-w-[90vw] text-center">
      <div class="w-16 h-16 mx-auto rounded-2xl bg-brand-50 dark:bg-brand-900/30 flex items-center justify-center mb-5">
        <svg class="w-8 h-8 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"/></svg>
      </div>
      <h2 class="text-xl font-bold mb-1" style="color:var(--text-primary)">ä¼šè¯å·²é”å®š</h2>
      <p class="text-sm mb-6" style="color:var(--text-secondary)">ç”±äºé•¿æ—¶é—´æœªæ“ä½œï¼Œç³»ç»Ÿå·²è‡ªåŠ¨é”å®š</p>
      <input id="lock-password" type="password" placeholder="è¾“å…¥å¯†ç è§£é”..." class="input input-lg mb-3" onkeydown="if(event.key==='Enter')SPC.unlock()" />
      <div id="lock-error" class="text-xs text-red-500 mb-3 hidden">å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•</div>
      <button onclick="SPC.unlock()" class="btn btn-primary w-full py-3 text-sm">è§£é”</button>
    </div>
  </div>

  <!-- ========== æœç´¢ (Raycast/Linear é£æ ¼) ========== -->
  <div id="search-overlay" class="overlay items-start justify-center pt-[15vh]" style="background:var(--bg-overlay); backdrop-filter:blur(6px);" onclick="if(event.target===this)SPC.closeSearch()">
    <div class="modal w-[560px] max-w-[90vw]">
      <div class="flex items-center gap-3 px-5 py-4 border-b" style="border-color:var(--border-subtle)">
        <svg class="w-5 h-5" style="color:var(--text-tertiary)" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"/></svg>
        <input id="search-input" type="text" placeholder="æœç´¢æ¨¡å—ã€å‘½ä»¤..." class="flex-1 text-sm outline-none bg-transparent" style="color:var(--text-primary)" oninput="SPC.handleSearch(this.value)" />
        <span class="kbd">Esc</span>
      </div>
      <div id="search-results" class="max-h-80 overflow-auto py-2">
        <div class="px-3 py-1.5 text-[10px] uppercase tracking-wider font-medium" style="color:var(--text-tertiary)">å¿«é€Ÿå¯¼èˆª</div>
        <button class="w-full flex items-center gap-3 px-5 py-2.5 hover:bg-brand-50 dark:hover:bg-brand-900/20 text-left transition-colors" onclick="SPC.navigate('home');SPC.closeSearch()">
          <span class="w-8 h-8 rounded-lg flex items-center justify-center" style="background:var(--bg-tertiary)"><svg class="w-4 h-4" style="color:var(--text-secondary)" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75"/></svg></span>
          <div><div class="text-sm font-medium" style="color:var(--text-primary)">ä¸»é¡µ</div><div class="text-[11px]" style="color:var(--text-tertiary)">ä»ªè¡¨ç›˜ä¸ç»Ÿè®¡</div></div>
          <span class="ml-auto kbd">âŒ˜1</span>
        </button>
        <button class="w-full flex items-center gap-3 px-5 py-2.5 hover:bg-brand-50 dark:hover:bg-brand-900/20 text-left transition-colors" onclick="SPC.navigate('safe');SPC.closeSearch()">
          <span class="w-8 h-8 rounded-lg bg-cyan-50 dark:bg-cyan-900/30 flex items-center justify-center"><svg class="w-4 h-4 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"/></svg></span>
          <div><div class="text-sm font-medium" style="color:var(--text-primary)">ä¿é™©ç®±</div><div class="text-[11px]" style="color:var(--text-tertiary)">å¯†ç ç®¡ç† Â· AES-256 åŠ å¯†</div></div>
          <span class="ml-auto kbd">âŒ˜2</span>
        </button>
        <button class="w-full flex items-center gap-3 px-5 py-2.5 hover:bg-brand-50 dark:hover:bg-brand-900/20 text-left transition-colors" onclick="SPC.navigate('plan');SPC.closeSearch()">
          <span class="w-8 h-8 rounded-lg bg-violet-50 dark:bg-violet-900/30 flex items-center justify-center"><svg class="w-4 h-4 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"/></svg></span>
          <div><div class="text-sm font-medium" style="color:var(--text-primary)">æ—¶é—´è§„åˆ’</div><div class="text-[11px]" style="color:var(--text-tertiary)">çœ‹æ¿ Â· ç•ªèŒ„é’Ÿ Â· NLP</div></div>
          <span class="ml-auto kbd">âŒ˜3</span>
        </button>
        <button class="w-full flex items-center gap-3 px-5 py-2.5 hover:bg-brand-50 dark:hover:bg-brand-900/20 text-left transition-colors" onclick="SPC.navigate('note');SPC.closeSearch()">
          <span class="w-8 h-8 rounded-lg bg-emerald-50 dark:bg-emerald-900/30 flex items-center justify-center"><svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"/></svg></span>
          <div><div class="text-sm font-medium" style="color:var(--text-primary)">ç¬”è®°</div><div class="text-[11px]" style="color:var(--text-tertiary)">Markdown Â· Wiki é“¾æ¥</div></div>
          <span class="ml-auto kbd">âŒ˜4</span>
        </button>
        <div class="h-px mx-3 my-2" style="background:var(--border-subtle)"></div>
        <button class="w-full flex items-center gap-3 px-5 py-2.5 hover:bg-brand-50 dark:hover:bg-brand-900/20 text-left transition-colors" onclick="SPC.toggleTheme();SPC.closeSearch()">
          <span class="w-8 h-8 rounded-lg flex items-center justify-center" style="background:var(--bg-tertiary)"><svg class="w-4 h-4" style="color:var(--text-secondary)" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"/></svg></span>
          <div><div class="text-sm font-medium" style="color:var(--text-primary)">åˆ‡æ¢ä¸»é¢˜</div><div class="text-[11px]" style="color:var(--text-tertiary)">äº®è‰² / æš—è‰²æ¨¡å¼</div></div>
        </button>
        <button class="w-full flex items-center gap-3 px-5 py-2.5 hover:bg-brand-50 dark:hover:bg-brand-900/20 text-left transition-colors" onclick="SyncService.downloadExport();SPC.closeSearch()">
          <span class="w-8 h-8 rounded-lg flex items-center justify-center" style="background:var(--bg-tertiary)"><svg class="w-4 h-4" style="color:var(--text-secondary)" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"/></svg></span>
          <div><div class="text-sm font-medium" style="color:var(--text-primary)">å¯¼å‡ºå¤‡ä»½</div><div class="text-[11px]" style="color:var(--text-tertiary)">ä¸‹è½½å…¨éƒ¨æ•°æ® (.spc.json)</div></div>
        </button>
        <button class="w-full flex items-center gap-3 px-5 py-2.5 hover:bg-brand-50 dark:hover:bg-brand-900/20 text-left transition-colors" onclick="SPC.lock();SPC.closeSearch()">
          <span class="w-8 h-8 rounded-lg flex items-center justify-center" style="background:var(--bg-tertiary)"><svg class="w-4 h-4" style="color:var(--text-secondary)" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"/></svg></span>
          <div><div class="text-sm font-medium" style="color:var(--text-primary)">é”å®šç³»ç»Ÿ</div><div class="text-[11px]" style="color:var(--text-tertiary)">ç«‹å³é”å®šä¼šè¯</div></div>
          <span class="ml-auto kbd">âŒ˜L</span>
        </button>
      </div>
    </div>
  </div>

  <!-- ========== è®¾ç½®æ¨¡æ€æ¡† ========== -->
  <div id="settings-overlay" class="overlay" style="background:var(--bg-overlay); backdrop-filter:blur(6px);" onclick="if(event.target===this)SPC.closeSettings()">
    <div class="modal w-[480px] max-w-[90vw]">
      <div class="flex items-center justify-between px-6 py-4 border-b" style="border-color:var(--border-subtle)">
        <h3 class="text-base font-semibold flex items-center gap-2" style="color:var(--text-primary)">
          <svg class="w-4 h-4 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
          ç³»ç»Ÿè®¾ç½®</h3>
        <button onclick="SPC.closeSettings()" class="w-8 h-8 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center justify-center transition-colors" style="color:var(--text-tertiary)">&times;</button>
      </div>
      <div class="p-6 space-y-5">
        <div>
          <label class="text-xs font-medium block mb-2" style="color:var(--text-secondary)">è‡ªåŠ¨é”å®š</label>
          <div class="flex gap-2">
            <button onclick="SPC.setAutoLock(3)" class="lock-opt btn btn-secondary btn-sm" data-val="3">3åˆ†é’Ÿ</button>
            <button onclick="SPC.setAutoLock(5)" class="lock-opt btn btn-secondary btn-sm" data-val="5">5åˆ†é’Ÿ</button>
            <button onclick="SPC.setAutoLock(15)" class="lock-opt btn btn-secondary btn-sm" data-val="15">15åˆ†é’Ÿ</button>
            <button onclick="SPC.setAutoLock(0)" class="lock-opt btn btn-secondary btn-sm" data-val="0">æ°¸ä¸</button>
          </div>
        </div>
        <div>
          <label class="text-xs font-medium block mb-2" style="color:var(--text-secondary)">å­æ¨¡å—è·¯å¾„</label>
          <div class="space-y-2">
            <div class="flex items-center gap-2"><span class="text-xs w-14" style="color:var(--text-tertiary)">ä¿é™©ç®±</span><input id="cfg-safe-url" type="text" value="safe/index.html" class="input text-xs flex-1" /></div>
            <div class="flex items-center gap-2"><span class="text-xs w-14" style="color:var(--text-tertiary)">è§„åˆ’</span><input id="cfg-plan-url" type="text" value="plan/index.html" class="input text-xs flex-1" /></div>
            <div class="flex items-center gap-2"><span class="text-xs w-14" style="color:var(--text-tertiary)">ç¬”è®°</span><input id="cfg-note-url" type="text" value="note/index.html" class="input text-xs flex-1" /></div>
          </div>
        </div>
        <div>
          <label class="text-xs font-medium block mb-2" style="color:var(--text-secondary)">æ•°æ®ç®¡ç†</label>
          <div class="flex gap-2">
            <button onclick="SyncService.downloadExport().then(()=>SPC.closeSettings())" class="btn btn-sm flex-1" style="background:rgba(34,197,94,0.08); color:#16A34A; border:1px solid rgba(34,197,94,0.2);">
              <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"/></svg>
              å¯¼å‡ºå¤‡ä»½</button>
            <button onclick="document.getElementById('import-file').click()" class="btn btn-sm flex-1" style="background:rgba(59,130,246,0.08); color:#2563EB; border:1px solid rgba(59,130,246,0.2);">
              <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"/></svg>
              å¯¼å…¥æ•°æ®</button>
            <input type="file" id="import-file" accept=".json,.spc,.enc" class="hidden" onchange="SyncService.importFromFile(this.files[0]).then(r=>{alert('âœ“ å¯¼å…¥æˆåŠŸ: '+r.tasks+' ä»»åŠ¡, '+r.notes+' ç¬”è®°');SPC.closeSettings()}).catch(e=>alert('å¯¼å…¥å¤±è´¥: '+e.message))">
          </div>
        </div>
        <div class="p-3 rounded-xl text-xs" style="background:var(--bg-tertiary); color:var(--text-secondary)" id="storage-info">è®¡ç®—ä¸­...</div>
        <button onclick="SPC.saveSettings();SPC.closeSettings()" class="btn btn-primary w-full py-2.5">ä¿å­˜è®¾ç½®</button>
      </div>
    </div>
  </div>

  <!-- ========== Toast å®¹å™¨ ========== -->
  <div id="toast-container" class="toast-container"></div>

  <!-- ========== PWA Service Worker ========== -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then((registration) => {
            console.log('SW registered:', registration.scope);
          })
          .catch((error) => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>

  <!-- ========== å†…æ ¸æ¨¡å— ========== -->
  <script src="js/core/db.js"></script>
  <script src="js/core/crypto.js"></script>
  <script src="js/core/auth.js"></script>
  <script src="js/core/bus.js"></script>
  <script src="js/services/TaskService.js"></script>
  <script src="js/services/VaultService.js"></script>
  <script src="js/services/NoteService.js"></script>
  <script src="js/services/SyncService.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
